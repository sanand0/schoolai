<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Penny+ : Agentic Financial Aid Assistant</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300;9..144,500;9..144,700&family=Archivo+SemiCondensed:wght@400;500;700;800&family=IBM+Plex+Mono:wght@400;500&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
</head>
<body>
  <div class="page-bg" aria-hidden="true">
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>
    <div class="bg-grid"></div>
    <div class="bg-noise"></div>
  </div>
  <div class="page">
    <header class="hero">
      <div>
        <p class="eyebrow">SNHU Demo • Agentic Financial Aid</p>
        <h1>Penny+ : Agentic Financial Aid Assistant</h1>
        <p class="subhead">
          A domain-intelligent agent that completes financial aid forms, infers eligibility, and explains every step. Automation is the hand; Straive support is the heart.
        </p>
        <button id="apiKeyBtn" class="ghost-btn" type="button">Set OpenRouter API Key</button>
      </div>
    </header>

    <section class="chat-section">
      <div class="chat-window" id="chatWindow" aria-live="polite"></div>
      <div class="chat-controls">
        <div class="controls-left">
          <label class="upload-btn" id="uploadLabel" for="fileInput">Upload Document</label>
          <input id="fileInput" type="file" accept=".pdf,.txt,.doc,.docx" hidden />
          <button id="downloadPdfBtn" class="ghost-btn" type="button">Download PDF Summary</button>
          <div class="lang-toggle" role="group" aria-label="Language toggle">
            <button id="langEn" class="toggle active" type="button">EN</button>
            <button id="langEs" class="toggle" type="button">ES</button>
          </div>
        </div>
        <div class="controls-right">
          <input id="userInput" type="text" placeholder="Type your response..." />
          <button id="sendBtn" class="send-btn" type="button">Send</button>
        </div>
      </div>
    </section>

    <section class="reasoning-section">
      <div class="reasoning-header">
        <div>
          <h2 id="reasoningTitle">Agent Reasoning Panel</h2>
          <p id="reasoningSubtitle">Transparent audit trail of fields, rules, and inferences.</p>
        </div>
        <div class="confidence">
          <span id="confidenceLabel">Confidence</span>
          <strong id="confidenceScore">0%</strong>
        </div>
      </div>
      <div class="reasoning-grid">
        <div class="card">
          <h3 id="fieldsTitle">Fields Filled</h3>
          <div id="fieldsList" class="card-body"></div>
        </div>
        <div class="card">
          <h3 id="rulesTitle">Rules Applied</h3>
          <div id="rulesList" class="card-body"></div>
        </div>
        <div class="card">
          <h3 id="inferencesTitle">Inferences</h3>
          <div id="inferencesList" class="card-body"></div>
        </div>
        <div class="card">
          <h3 id="extractedTitle">Extracted Data</h3>
          <div id="extractedList" class="card-body"></div>
        </div>
        <div class="card full">
          <h3 id="recommendationsTitle">Loan Recommendations</h3>
          <div id="recommendationsList" class="card-body"></div>
        </div>
        <div class="card full">
          <h3 id="formTitle">Financial Aid Form Preview</h3>
          <div id="formPreview" class="form-preview"></div>
        </div>
        <div class="card full">
          <h3 id="checklistTitle">Completion Checklist</h3>
          <div id="checklistList" class="card-body"></div>
        </div>
        <div class="card full">
          <h3 id="summaryTitle">Financial Aid Completion Summary</h3>
          <div id="finalSummary" class="card-body"></div>
        </div>
        <div class="card full">
          <h3 id="sourcesTitle">Sources & Citations</h3>
          <div id="sourcesList" class="card-body"></div>
        </div>
      </div>
    </section>
  </div>

  <div class="modal-shell hidden" id="api-key-modal" role="dialog" aria-modal="true" aria-labelledby="api-key-title">
    <div class="modal-backdrop" data-close="api-key"></div>
    <div class="modal-window api-key-window">
      <header class="modal-header">
        <div>
          <p class="eyebrow">OpenRouter</p>
          <h2 id="api-key-title">Set API Key</h2>
          <p class="muted">Paste your OpenRouter API key to enable live LLM responses.</p>
        </div>
        <button class="icon-btn" id="api-key-close-btn" type="button" aria-label="Close">✕</button>
      </header>
      <div class="api-key-body">
        <label class="form-label" for="apiKeyInput">OpenRouter API key</label>
        <input id="apiKeyInput" type="password" placeholder="sk-or-..." />
        <div class="api-key-actions">
          <button id="apiKeySaveBtn" class="send-btn" type="button">Save Key</button>
          <button id="apiKeyCancelBtn" class="ghost-btn" type="button">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
